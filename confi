from typing import List, Optional
from pydantic import BaseModel, Field


class PromptVariable(BaseModel):
    """Schema for prompt input variable"""
    name: str
    type: str = "string"
    description: Optional[str] = None


class InferenceConfig(BaseModel):
    """Inference configuration parameters"""
    max_tokens: int = Field(default=2048, ge=1, le=8192)
    temperature: float = Field(default=0.7, ge=0.0, le=1.0)
    top_p: float = Field(default=0.9, ge=0.0, le=1.0)
    top_k: int = Field(default=250, ge=0, le=500)
    stop_sequences: List[str] = Field(default_factory=list)


class PromptConfig(BaseModel):
    """Complete prompt configuration from YAML"""
    name: str
    description: str
    template: str
    variables: List[PromptVariable]
    inference_config: InferenceConfig
    model_id: Optional[str] = None  # Can be set at runtime

    class Config:
        extra = "ignore"  # Ignore extra fields in YAML
